import glob
import json

from flask import Flask, render_template

from dataloader import load_state_data

app = Flask(__name__)


@app.route('/')
def index():
    return render_template('index.html', title='Home')


@app.route('/state')
def state():
    state_data = {}
    state_data["North Carolina"]='[null, null, null, null, null, null, null, null, null, 63, 97, 137, 184, 255, 297, 398, 504, 636, 763, 935, 1167, 1307, 1498, 1584, 1857, 2093, 2402, 2583, 2870, 3221, 3426, 3651, 3908, 4312, 4520, 4816, 5024, 5123, 5465, 5859, 6140, 6493, 6764, 6951, 7220, 7608, 8052, 8623, 8830, 9142, 9568, 9948, 10509, 10923, 11509, 11664, 11848, 12256, 12758, 13397, 13868, 14360, 14764, 15045, 15346, 15816, 16507, 17123, 17982, 18512, 19023, 19700, 20122, 20860, 21618, 22725, 23222, 23964, 24140, 24628, 25412, 26488, 27673, 28589, 29263, 29889, 30777, 31966, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Florida"]='[null, null, null, null, null, null, null, null, 216, 328, 432, 563, 763, 1007, 1227, 1467, 1977, 2484, 3198, 4038, 4950, 5704, 6741, 7773, 9008, 10268, 11545, 12350, 13629, 14747, 15698, 16826, 17968, 18986, 19895, 21019, 21628, 22519, 23340, 24753, 25492, 26314, 27058, 27869, 28576, 29648, 30533, 30839, 31528, 32138, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Michigan"]='[null, null, null, null, null, null, null, null, null, 80, 334, 549, 787, 1035, 1328, 1791, 2295, 2856, 3657, 4650, 5486, 6498, 7615, 9334, 10791, 12744, 14225, 15718, 17221, 18970, 20346, 21504, 22783, 23993, 24638, 25635, 27001, 28059, 29263, 30023, 30791, 31424, 32000, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Tennessee"]='[null, null, null, null, null, null, null, null, null, null, null, 98, 154, 228, 371, 505, 615, 667, 784, 957, 1203, 1373, 1537, 1834, 2239, 2683, 2845, 3067, 3321, 3633, 3802, 4138, 4362, 4634, 4862, 5114, 5308, 5610, 5823, 6079, 6262, 6589, 6762, 7070, 7238, 7394, 7842, 8266, 8726, 9189, 9667, 9918, 10052, 10366, 10735, 11891, 12661, 13177, 13571, 13690, 13938, 14096, 14441, 14768, 14985, 15544, 16110, 16370, 16669, 16970, 17288, 17388, 18011, 18378, 18532, 18961, 19394, 19789, 20145, 20607, 20965, 21306, 21679, 22085, 22566, 23006, 23554, 24375, 24822, 25120, 25520, 26071, 26381, 26944, 27575, 27869, 28340, 29126, 29541, 30432, 31160, 31830, 32143, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Arkansas"]='[null, null, null, null, null, null, null, null, null, null, null, 62, 100, 118, 165, 201, 232, 308, 349, 386, 409, 449, 508, 564, 624, 683, 738, 743, 853, 927, 997, 1071, 1146, 1202, 1228, 1280, 1475, 1498, 1599, 1620, 1695, 1777, 1781, 1971, 2262, 2392, 2599, 2810, 2909, 3001, 3069, 3127, 3207, 3281, 3310, 3372, 3431, 3469, 3525, 3611, 3694, 3747, 3984, 4012, 4043, 4164, 4236, 4366, 4463, 4578, 4759, 4813, 4923, 5003, 5458, 5612, 5775, 5922, 6029, 6180, 6277, 6538, 6777, 7013, 7253, 7443, 7818, 8067, 8425, 8651, 9101, 9426, 9740, 10080, 10368, 10816, 11547, 12095, 12501, 12917, 13191, 13606, 13928, 14631, 15142, 15561, 16083, 16678, 17375, 18062, 18740]'
    state_data["Indiana"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, 79, 124, 199, 256, 361, 474, 636, 939, 1221, 1509, 1780, 2152, 2558, 3026, 3422, 3935, 4396, 4923, 5479, 5901, 6323, 6881, 7395, 7881, 8200, 8492, 8909, 9486, 10085, 10590, 11146, 11625, 12007, 12385, 12989, 13633, 14331, 14955, 15901, 16515, 17109, 17756, 18545, 19196, 19830, 20398, 20921, 21752, 22373, 23008, 23595, 23982, 24443, 24950, 25323, 25924, 26509, 27142, 27635, 28116, 28567, 29117, 29760, 30219, 30707, 31180, 31518, 31876, 32224, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Mississippi"]='[null, null, null, null, null, null, null, null, null, null, null, null, 80, 140, 207, 249, 320, 377, 485, 579, 663, 758, 847, 937, 1073, 1177, 1358, 1455, 1638, 1738, 1915, 2003, 2260, 2469, 2642, 2781, 2942, 3087, 3360, 3624, 3793, 3974, 4274, 4512, 4716, 4894, 5153, 5434, 5718, 5911, 6094, 6342, 6569, 6815, 7212, 7441, 7550, 7877, 8207, 8424, 8686, 9090, 9378, 9501, 9674, 9908, 10090, 10483, 10801, 11123, 11296, 11432, 11967, 12222, 12642, 13005, 13252, 13458, 13731, 14044, 14372, 14790, 15229, 15501, 15501, 15752, 16054, 16322, 16560, 16769, 16769, 17270, 17768, 17768, 18483, 18483, 19091, 19348, 19516, 19799, 20152, 20641, 20641, 20641, 20641, 20641, 22287, 22898, 23424, 24516, 25066, 25531]'
    state_data["Connecticut"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 96, 159, 194, 223, 327, 415, 618, 875, 1012, 1291, 1524, 1993, 2571, 3128, 3557, 3824, 4915, 5276, 5675, 6906, 7781, 8781, 9784, 10538, 11510, 12035, 13381, 13989, 14755, 15884, 16809, 17550, 17962, 19815, 20360, 22469, 23100, 23921, 24582, 25269, 25997, 26312, 26767, 27700, 28764, 29287, 29973, 30621, 31212, 31803, 32394, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Maine"]='[null, null, null, null, null, null, null, 17, 32, 42, 52, 56, 70, 89, 107, 118, 142, 155, 168, 211, 253, 275, 303, 344, 376, 432, 456, 470, 499, 519, 537, 560, 586, 616, 633, 698, 734, 770, 796, 827, 847, 867, 875, 888, 907, 937, 965, 990, 1015, 1023, 1040, 1056, 1095, 1123, 1152, 1185, 1205, 1226, 1254, 1330, 1374, 1408, 1436, 1462, 1477, 1515, 1565, 1603, 1648, 1687, 1713, 1741, 1819, 1877, 1948, 2013, 2055, 2074, 2109, 2137, 2189, 2226, 2282, 2325, 2349, 2377, 2418, 2446, 2482, 2524, 2570, 2588, 2606, 2637, 2667, 2721, 2757, 2793, 2810, 2819, 2836, 2878, 2913, 2938, 2957, 2971, 2994]'
    state_data["Utah"]='[null, null, null, null, null, null, null, null, null, null, null, 61, 94, 120, 141, 223, 255, 323, 363, 450, 573, 688, 788, 902, 984, 1065, 1268, 1423, 1593, 1666, 1732, 1817, 1967, 2092, 2213, 2312, 2371, 2418, 2540, 2676, 2807, 2943, 3076, 3225, 3312, 3453, 3614, 3770, 3950, 4132, 4240, 4335, 4482, 4659, 4815, 4971, 5159, 5292, 5421, 5578, 5704, 5899, 6084, 6232, 6348, 6421, 6604, 6732, 6895, 7049, 7218, 7366, 7503, 7701, 7862, 8056, 8238, 8378, 8509, 8603, 8687, 8923, 9256, 9533, 9802, 10009, 10210, 10491, 10801, 11255, 11810, 12089, 12371, 12567, 12879, 13251, 13586, 13985, 14328, 14631, 14948, 15366, 15853, 16456, 17098, 17510, 17962, 18327, 18814, 19413, 20058]'
    state_data["New York"]='[null, null, null, 216, 325, 421, 613, 729, 950, 1374, 2382, 4152, 7102, 10356, 15168, 20875, 25665, 30811, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Delaware"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 66, 104, 133, 149, 171, 206, 253, 298, 332, 404, 438, 466, 639, 697, 766, 858, 1084, 1198, 1297, 1452, 1594, 1697, 1839, 2035, 2095, 2207, 2496, 2614, 2819, 3011, 3284, 3414, 3553, 3688, 4144, 4272, 4678, 4803, 4842, 5033, 5157, 5307, 5618, 5835, 5984, 6179, 6357, 6515, 6632, 7131, 7249, 7317, 7380, 7504, 7958, 8093, 8279, 8388, 8464, 8556, 8687, 8792, 8911, 9063, 9153, 9188, 9266, 9337, 9480, 9545, 9670, 9726, 9760, 9801, 9855, 9930, 10006, 10051, 10101, 10136, 10136, 10253, 10307, 10343, 10412, 10461, 10505, 10564, 10600, 10647, 10735, 10779, 10818, 10844, 10939, 11017, 11174, 11307, 11464, 11540]'
    state_data["Kentucky"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, 54, 99, 124, 157, 198, 248, 302, 394, 439, 480, 594, 670, 770, 831, 917, 955, 1008, 1149, 1346, 1452, 1693, 1840, 1963, 2048, 2210, 2291, 2429, 2522, 2707, 2960, 3050, 3192, 3373, 3481, 3779, 3905, 4074, 4146, 4375, 4539, 4708, 4879, 5052, 5130, 5245, 5822, 5934, 6128, 6288, 6440, 6576, 6677, 6853, 7080, 7225, 7444, 7688, 7810, 7935, 8069, 8167, 8286, 8426, 8571, 8712, 8834, 8951, 9077, 9184, 9464, 9704, 9875, 10046, 10185, 10410, 10705, 10977, 11287, 11356, 11476, 11708, 11883, 11945, 12166, 12445, 12529, 12647, 12829, 12995, 13197, 13454, 13630, 13750, 13839, 14141, 14363, 14617, 14859, 15167, 15232]'
    state_data["Massachusetts"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 1159, 1838, 2417, 3240, 4257, 4955, 5752, 6620, 7738, 8966, 10402, 11736, 12500, 13837, 15202, 16790, 18941, 20974, 22860, 25475, 26867, 28163, 29918, 32181, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Alabama"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 276, 445, 536, 643, 755, 831, 950, 1006, 1121, 1316, 1550, 1668, 1841, 2010, 2239, 2540, 2881, 3033, 3271, 3595, 3798, 3962, 4229, 4385, 4468, 4702, 4893, 5084, 5320, 5616, 5822, 6018, 6210, 6413, 6567, 6772, 6934, 7069, 7329, 7611, 7888, 8025, 8120, 8532, 9046, 9188, 9486, 9889, 10167, 10260, 10494, 10700, 11101, 11505, 11742, 12086, 12333, 12699, 13119, 13476, 13839, 14478, 14632, 15311, 15775, 16181, 16588, 17203, 17494, 18020, 18549, 18764, 19066, 19708, 20043, 20500, 20590, 21071, 21626, 22474, 23333, 24221, 25235, 25892, 26524, 26914, 27796, 28583, 29126, 29598, 30031, 30670, 31624, 32753, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Arizona"]='[null, null, null, null, null, null, null, null, null, null, null, 63, 104, 152, 235, 326, 401, 508, 665, 773, 919, 1157, 1289, 1413, 1598, 1769, 2019, 2269, 2456, 2575, 2726, 3018, 3112, 3393, 3539, 3702, 3806, 3962, 4234, 4507, 4719, 4929, 5064, 5251, 5459, 5769, 6045, 6280, 6526, 6716, 6948, 7202, 7648, 7962, 8364, 8640, 8919, 9305, 9707, 9945, 10526, 10960, 11119, 11380, 11736, 12176, 12674, 13169, 13671, 13937, 14170, 14566, 14897, 15315, 15608, 16039, 16339, 16561, 16783, 17262, 17763, 18465, 19255, 19936, 20123, 21250, 22223, 22753, 24332, 25451, 26889, 27678, 28296, 29852, 31264, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Illinois"]='[null, null, null, null, null, null, null, null, 105, 160, 288, 422, 585, 753, 1049, 1285, 1535, 1865, 2538, 3024, 3491, 4596, 5057, 5994, 6980, 7695, 8904, 10357, 11256, 12262, 13549, 15078, 16422, 17887, 19180, 20852, 22025, 23247, 24593, 25733, 27575, 29160, 30357, 31508, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Iowa"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 52, 82, 108, 133, 158, 185, 239, 297, 366, 433, 522, 576, 637, 720, 849, 929, 1061, 1079, 1211, 1340, 1462, 1599, 1742, 1919, 2123, 2205, 2288, 2557, 2709, 3170, 3485, 3973, 4076, 4246, 4819, 5537, 6002, 6443, 7036, 7703, 8021, 8822, 9339, 9938, 10428, 10810, 11120, 11452, 11851, 12296, 12498, 12828, 13270, 13792, 14189, 14550, 14978, 15240, 15559, 15829, 16105, 16340, 16722, 17146, 17627, 17912, 18303, 18475, 19267, 19506, 19735, 20037, 20386, 20653, 20984, 21265, 21492, 21884, 22258, 22381, 22649, 22951, 23257, 23509, 23839, 24151, 24427, 24577, 24711, 24861, 25191, 25496, 25939, 26103, 26457, 26657, 26894, 27279, 27724, 28114]'
    state_data["New Jersey"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, 97, 176, 267, 425, 732, 896, 1336, 1913, 2844, 3675, 4402, 6876, 8825, 11124, 13386, 16618, 18696, 22255, 25590, 29895, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767, 32767]'
    state_data["Washington"]='[125, 191, 279, 327, 413, 480, 601, 716, 833, 958, 1126, 1289, 1429, 1658, 1798, 2134, 2323, 2530, 3071, 3614, 4056, 4509, 4886, 5342, 5771, 6235, 6578, 7068, 7463, 7848, 8167, 8489, 8893, 9177, 9635, 9871, 10136, 10384, 10603, 10926, 11188, 11543, 11789, 12064, 12300, 12504, 12699, 12970, 13281, 13520, 13750, 13906, 14139, 14413, 14710, 15089, 15304, 15584, 15727, 16032, 16367, 16518, 16824, 17035, 17276, 17485, 17609, 17865, 18046, 18392, 18541, 18713, 18903, 19078, 19214, 19366, 19692, 19939, 20206, 20333, 20485, 20841, 21143, 21421, 21770, 22041, 22245, 22521, 22769, 23030, 23490, 23775, 24087, 24387, 24639, 24901, 25185, 25551, 25833, 26165]'
    state_data["Missouri"]='[null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, 90, 183, 255, 356, 502, 670, 838, 903, 1031, 1327, 1581, 1834, 2113, 2291, 2367, 2722, 3037, 3327, 3539, 3799, 4024, 4160, 4383, 4686, 4895, 5111, 5283, 5517, 5667, 5807, 5941, 6137, 6321, 6625, 6826, 6997, 7171, 7303, 7425, 7562, 7835, 8154, 8386, 8754, 8916, 9102, 9341, 9489, 9666, 9844, 9918, 10006, 10142, 10317, 10456, 10675, 10789, 10945, 11080, 11232, 11340, 11558, 11752, 11988, 12167, 12291, 12492, 12673, 12795, 12962, 13147, 13327, 13575, 13767, 14057, 14253, 14442, 14553, 14734, 14913, 15187, 15390, 15585, 15810, 15983, 16189, 16417, 16625, 16908, 17201, 17590, 18003, 18143, 18577, 18868, 19421, 19914, 20261, 20575, 21043]'

    return render_template('state.html', title='By State', state_data=state_data)


@app.route('/school')
def school():
    return render_template('school.html', title='By School')


@app.route('/team')
def team():
    return render_template('team.html', title='The Team')


@app.route('/tools')
def tools():
    return render_template('tools.html', title='Tools')


if __name__ == '__main__':
    path = "static/datasets/*.csv"

    # for file_name in glob.glob(path):
    #     state_name = file_name[16:-4]
    #     state_data[state_name] = json.dumps(load_state_data(file_name))


    app.run()
